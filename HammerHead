    #include <msp430.h> 
    //Modified for MSP430FR6989
    //Servo control on P3.6 with DS3235-270
    //90 degree movement (0° to 90°)
    //Using Timer B0.2

    void main(void)
    {
        WDTCTL = WDTPW | WDTHOLD;   // stop watchdog timer
        
        // Disable the GPIO power-on default high-impedance mode
        PM5CTL0 &= ~LOCKLPM5;       // CRITICAL for FR6989!
        
        // Configure P3.6 for PWM output using Timer B0.2
        P3DIR |= BIT6;              // Set P3.6 as output
        P3SEL1 |= BIT6;             // Select Timer function
        P3SEL0 &= ~BIT6;            // P3.6 = TB0.2 output
        
        // Configure Timer B0 for PWM
        TB0CCR0 = 20000 - 1;        // PWM period (20ms at 1MHz)
        TB0CCTL2 = OUTMOD_7;        // CCR2 reset/set mode
        TB0CTL = TBSSEL__SMCLK | MC__UP | TBCLR;  // SMCLK, up mode, clear timer
        
        while(1) {
            TB0CCR2 = 1000;          // 0 degrees
            __delay_cycles(1500000);
            
            TB0CCR2 = 2300;          // 90 degrees
            __delay_cycles(1500000);
            
            TB0CCR2 = 1000;          // 0 degrees
            __delay_cycles(1500000);
        }
    }
